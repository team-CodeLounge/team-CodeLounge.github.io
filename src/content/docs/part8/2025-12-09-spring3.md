---
title: Nginx 세팅
description: A reference page in my new Starlight docs site.
---

## Nginx 기본 구조
```bash
/etc/nginx/sites-available
/etc/nginx/sites-enabled
```
- Ubuntu에서 Nginx는 두 폴더를 사용해 도메인 설정을 관리한다
- `sites-available`: 도메인 설정 파일을 보관하는 장소 / 서버에서 사용되는 것은 아닌 보관용
- `sites-enabled`: 실제로 서버가 사용되는 설정 파일 목록(활성 목록)
<br/><br/>


```bash
# 예시
/etc/nginx/sites-enabled/poppang.co.kr -> ../sites-available/poppang.co.kr

# 구조
sites-available/
│── poppang.co.kr           ← 진짜 파일 (원본)
│── dev.poppang.co.kr       ← 진짜 파일 (원본)

sites-enabled/
│── poppang.co.kr -> ../sites-available/poppang.co.kr   ← 링크
│── dev.poppang.co.kr -> ../sites-available/dev.poppang.co.kr  ← 링크
```
- sites-enabled에 있는 파일을 심볼릭 링크로 연결한 것만 실제로 적용됨
<br/><br/>

## Nginx 설치
```bash
sudo apt update
sudo apt install nginx -y
```

## Nginx 도메인 파일 생성
```bash
# 만들려는 도메인이 dev.poppang.co.kr이라면
sudo vi /etc/nginx/sites-available/dev.poppang.co.kr
```

## 인증서 발급 전 리다이렉트 없는 HTTP서버만 작성
```bash
# HTTP → HTTPS 리다이렉트
server {
   listen 80;
   listen [::]:80;
   server_name poppang.co.kr www.poppang.co.kr;

   return 301 https://$host$request_uri;
}
```
- 인증서 발급 전에는 80포트(HTTP)만 사용
- 인증서 발급 전에는 HTTP 리다이렉트를 걸면 안됨