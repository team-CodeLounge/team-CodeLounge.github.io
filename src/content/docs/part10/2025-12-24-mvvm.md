---
title: Singleton(싱글톤)
description: A reference page in my new Starlight docs site.
---

## static: 타입 프로퍼티(Type Property) 개념 정리
> Swift의 `static` 키워드는 인스턴스 생성 여부와 상관없이 타입 자체에 귀속되어
 해당 타입 전체에서 단 하나만 존재하는 프로퍼티를 선언할 때 사용한다.
- 타입: `struct`, `class`, `enum`
- 인스턴스: 타입을 기반으로 실제 메모리에 생성된 객체이다.
- 생성: 타입으로부터 인스턴스를 만들어 변수/상수에 할당하는 과정, 이 시점에 메모리에 올라간다.
- 프로퍼티: 타입 또는 인스턴스가 가지는 값(데이터)이다.

## static 핵심 개념
- `static` 프로퍼티는 타입에 소속됨
- 인스턴스 개수에 상관없이 값은 하나
- 인스턴스가 아닌 타입 이름으로 접근한다
- 타입 프로퍼티는 저장 프로퍼티(let, var)와 연산 프로퍼티(var만 가능)에 모두 적용할 수 있다.
    - 저장 타입 프로퍼티에는 초기값을 반드시 넣어줘야 하며 lazy를 붙이지 않아도 첫 접근 시 lazy 하게 초기화 되는 것이 특징이다.
- 타입 프로퍼티는 인스턴스.프로퍼티로는 접근할 수 없다.
```swift
TypeName.staticProperty
```

## static 사용 이유
- 공통 상태, 공통 값을 관리할 때
- 인스턴스마다 달라질 필요가 없는 정보
- 전역 변수 대신 타입에 의미를 묶고 싶을 떄
```swift
struct User {
    static var userCount = 0 // 타입 프로퍼티
    let name: String

    init(name: String) {
        self.name = name
        User.userCount += 1
    }
}

let u1 = User(name: "A")
let u2 = User(name: "B")
print(User.userCount) // 2
```

## 싱글톤 패턴(Singleton Pattern)
> 싱글톤 패턴은 하나의 객체를 가지고 공용으로 사용할 수 있도록 만드는 디자인 패턴이다.
- 싱글톤 패턴이 하나의 객체를 가지고 공용으로 사용하는 이유는 "객체를 굳이 여러 개 만들 필요가 없기 때문"이다.

## 싱글톤 사용법
```swift
// init 함수로 다른 인스턴스 생성을 막기 위해 생성자 접근 제어를 private 수준으로 지정
class User {
    static let shared = User()
    privaet init() {}

    var name: String?
    var age: Int?
    var location: String?
}

// 인스턴스 접근
User.shared
```

## 싱글톤 패턴 장단점
- 인스턴스를 여러개 만들지 않아도 되서 불필요한 메모리 낭비를 줄일 수 있다.
- static의 lazy특성에 따라 최초 접근 시에만 생성(lazy initialization)되어 불필요한 초기 생성 비용을 줄일 수 있다.
- 멀티 스레드 환경에서 동시에 싱글턴 객체를 참조하면 원치 않은 결과를 가져올 수 있다.
- 한 싱글톤으로 선언된 인스턴스가 너무 많은 곳에 결합되어 있다면 어떤 작업을 하는지 찾기 어려워지는 OOP의 기본원칙을 위배하는 상황이 발생할 수도 있다.

## swift 기본 싱글톤
```swift
// 하드웨어 기반 디스플레이와 관련된 속성을 관리하는 클래스
let screen = UIScreen.main

// key-value 형태로 간단한 데이터를 저장하고 관리할 수 있는 인터페이스를 제공하는 데이터베이스 클래스
let userDefaults = UserDefaults.standard

// iOS에서 실행되는 중앙제오 애플리케이션 객체
let application = UIApplication.shared

// 애플리케이션 파일 시스템을 관리하는 클래스
let fileManager = FileManager.default

// 등록된 알림의 정보를 사용할 수 있게 해주는 클래스
let notification = NotificationCenter.default

// URL 세션을 관리하는 클래스
let urlSession = URLSession.shared
```

## Reference
- [Blog](https://mini-min-dev.tistory.com/240?category=1234031)