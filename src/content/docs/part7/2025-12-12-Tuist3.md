---
title: Tuist3
description: A reference page in my new Starlight docs site.
---

## Tuist
Xcode 프로젝트를 직접 관리하지 않고 코드로 정의해서 자동 생성/최적화해주는 CLI 빌더 툴이다.

## 사용 이유
협업을 할 때 항상 마주하게 되는 문제 중 하나로 코드를 Merge하는 경우에 같은 공간에서 작업을 한 코드들이 충돌이 발생한다. 이를 원천적으로 피하기 위해 사용한다.

## 목적
Tuist는 Project / Workspace / Dependency / Config 같은 매니페스트를 기반으로  
Xcode 프로젝트와 워크스페이스를 생성·관리하는 도구이고,  
Workspace는 여러 프로젝트를 묶어 개발 단위로 관리하기 위한 컨테이너 역할을 한다

## Install(Tuist 3.x)
```bash
# Tuist3 설치
mise install tuist@3.17.0

# 버전 확인
tuist version

# 버전 리스트 확인
mise list tuist

# 프로젝트에 Tuist3 고정
mise use tuist@3.17.0 --path .
```

## 프로젝트 만들기(Tuist 3.x)

1. 프로젝트 설정
```bash
# 버전 설정
mise use tuist@3.17.0 --path .

# 프로젝트 초기화
tuist init --platform ios

# ls
# Plugins       Project.swift Targets       Tuist

# 그래프 png생성
tuist graph   
tuist graph -t

# Tuist 설정 파일(Project.swift, Workspace.swift 등)을 “Xcode로 편집하기 쉽게 열어주는 명령
tuist edit

# xcodeWorkspace
# 여러 프로젝트를 하나로 묶어서 같이 사용하게 해주는 프로젝트

# 예제 앱 3개 => 하나의 최종앱으로 합쳐보기
- 홈
- 포스트
- 마이페이지

# 폴더 생성
mkdir App 
mkdir Modules

# 파일 이동
App폴더에 package.swift, Targets디렉터리 이동

# 워크스페이스 생성
touch Workspace.swift

# 열기
open Workspace.swift 
```

2. Workspace.swift에 저장
```bash
# Workspace.swift
import ProjectDescription

let workspace = Workspace(
    name: "CustomWorkspace",
    projects: [
        "App",
        "Modules/**"
    ]
)
```

3. 하위 모듈 프로젝트 생성
```bash
# 홈화면 프로젝트 생성
cd modules
mkdir Home
cd Home
tuist init
tuist generate

# Todos화면 프로젝트 생성
cd modules
mkdir Todos
cd Todos
tuist init
tuist generate

# MyPage 프로젝트 생성(SwiftUI)
mkdir Mypage
cd MyPage 
tuist init --platform ios --template swiftui
tuist generate

# 상위로 두번 이동 및 설정
cd.. cd..
tuist edit

# 메인 앱에서 설정창 열기
tuist edit 
```

4. 메인 프로젝트로 돌와와서 설정
```bash
# Manifests/Tuist/ProjectDescriptionHelpers/Project+Templates.swift
import ProjectDescription

/// Project helpers are functions that simplify the way you define your project.
/// Share code to create targets, settings, dependencies,
/// Create your own conventions, e.g: a func that makes sure all shared targets are "static frameworks"
/// See https://docs.tuist.io/guides/helpers/

extension Project {
    /// Helper function to create the Project for this ExampleApp
    public static func app(name: String,
                           platform: Platform,
                           additionalTargets: [String]) -> Project {
        var targets = makeAppTargets(name: name,
                                     platform: platform,
                                     dependencies: additionalTargets.map { TargetDependency.target(name: $0) })
        targets += additionalTargets.flatMap({ makeFrameworkTargets(name: $0, platform: platform) })
        return Project(name: name,
                       organizationName: "tuist.io",
                       targets: targets)
    }
    
    /// Helper function to create the Project for this ExampleApp
    public static func mainApp(name: String,
                           platform: Platform
    ) -> Project {
        
        let platform: Platform = platform
        let infoPlist: [String: InfoPlist.Value] = [
            "CFBundleShortVersionString": "1.0",
            "CFBundleVersion": "1",
            "UIMainStoryboardFile": "",
            "UILaunchStoryboardName": "LaunchScreen"
            ]

        let mainTarget = Target(
            name: name,
            platform: platform,
            product: .app,
            bundleId: "io.tuist.\(name)",
            deploymentTarget: .iOS(targetVersion: "17.0", devices: [.iphone]),
            infoPlist: .extendingDefault(with: infoPlist),
            sources: ["Targets/\(name)/Sources/**"],
            resources: ["Targets/\(name)/Resources/**"],
            dependencies: [
                .project(target: "HomeKit", path: "../Modules/Home"),
                .project(target: "HomeUI", path: "../Modules/Home"),
                
                .project(target: "TodosKit", path: "../Modules/Todos"),
                .project(target: "TodosUI", path: "../Modules/Todos"),
                
                .project(target: "MyPageKit", path: "../Modules/MyPage"),
                .project(target: "MyPageUI", path: "../Modules/MyPage")
            ]
        )

        let testTarget = Target(
            name: "\(name)Tests",
            platform: platform,
            product: .unitTests,
            bundleId: "io.tuist.\(name)Tests",
            deploymentTarget: .iOS(targetVersion: "17.0", devices: [.iphone]),
            infoPlist: .default,
            sources: ["Targets/\(name)/Tests/**"],
            dependencies: [
                .target(name: "\(name)")
        ])
        
        return Project(name: name,
                       organizationName: "tuist.io",
                       targets: [mainTarget, testTarget])
    }
 
    // MARK: - Private

    /// Helper function to create a framework target and an associated unit test target
    private static func makeFrameworkTargets(name: String, platform: Platform) -> [Target] {
        let sources = Target(name: name,
                platform: platform,
                product: .framework,
                bundleId: "io.tuist.\(name)",
                deploymentTarget: .iOS(targetVersion: "17.0", devices: [.iphone]),
                infoPlist: .default,
                sources: ["Targets/\(name)/Sources/**"],
                resources: [],
                dependencies: [])
        let tests = Target(name: "\(name)Tests",
                platform: platform,
                product: .unitTests,
                bundleId: "io.tuist.\(name)Tests",
                deploymentTarget: .iOS(targetVersion: "17.0", devices: [.iphone]),
                infoPlist: .default,
                sources: ["Targets/\(name)/Tests/**"],
                resources: [],
                dependencies: [.target(name: name)])
        return [sources, tests]
    }

    /// Helper function to create the application target and the unit test target.
    private static func makeAppTargets(name: String, platform: Platform, dependencies: [TargetDependency]) -> [Target] {
        let platform: Platform = platform
        let infoPlist: [String: InfoPlist.Value] = [
            "CFBundleShortVersionString": "1.0",
            "CFBundleVersion": "1",
            "UIMainStoryboardFile": "",
            "UILaunchStoryboardName": "LaunchScreen"
            ]

        let mainTarget = Target(
            name: name,
            platform: platform,
            product: .app,
            bundleId: "io.tuist.\(name)",
            deploymentTarget: .iOS(targetVersion: "17.0", devices: [.iphone]),
            infoPlist: .extendingDefault(with: infoPlist),
            sources: ["Targets/\(name)/Sources/**"],
            resources: ["Targets/\(name)/Resources/**"],
            dependencies: dependencies
        )

        let testTarget = Target(
            name: "\(name)Tests",
            platform: platform,
            product: .unitTests,
            bundleId: "io.tuist.\(name)Tests",
            deploymentTarget: .iOS(targetVersion: "17.0", devices: [.iphone]),
            infoPlist: .default,
            sources: ["Targets/\(name)/Tests/**"],
            dependencies: [
                .target(name: "\(name)")
        ])
        return [mainTarget, testTarget]
    }
}


# App/Project
let project = Project.mainApp(name: "PoppangApp",
                          platform: .iOS)

# 최종
tuist clean
tuist generate
open CustomWorkspace.xcworkspace/

```

## 기존 프로젝트 가져오기(Tuist 3.x)
```bash
# 링크 들어가서 파일 다운로드 및 터미널 열기
https://github.com/sendbird/sendbird-chat-sample-ios

# 3.17.0 설치
mise install tuist@3.17.0

# 버전 리스트 확인
mise list tuist

# 프로젝트에 걸린 Tuist 설정 제거
rm mise.toml

# 프로젝트에 Tuist3 고정
mise use tuist@3.17.0 --path .

# 버전 확인
tuist version

# 프로젝트가 필요로 하는 “외부 의존성”을 미리 내려받는 단계(Tuist/Dependencies.swift를 읽음/Swift Package / Carthage 의존성 다운로드)
tuist fetch

# Tuist 설정 파일을 기반으로 Xcode 프로젝트/워크스페이스를 생성
tuist generate

# 프로젝트 열기
open Samples.xcworkspace
```


<!-- ````bash
# https://github.com/sendbird/sendbird-chat-sample-ios

# Tuist 프로젝트가 요구하는 “툴/플러그인”을 설치하는 명령(앱 의존성(SDK, SPM 패키지) 아님)
# Tuist/Config.swift, Tuist/Plugins.swift, Tuist/Dependencies.swift
tuist install

# Xcode 프로젝트(.xcodeproj / .xcworkspace)를 생성
tuist generate
``` -->

## Reference
- https://tuist.dev/ko
- https://docs.tuist.dev/ko/guides/quick-start/install-tuist
- https://github.com/tuist/tuist
- https://jinsangjin.tistory.com/169
- https://github.com/sendbird/sendbird-chat-sample-ios
- https://green1229.tistory.com/487