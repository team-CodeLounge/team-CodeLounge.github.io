---
title: TCA Stack 기반 Navigation
description: A reference page in my new Starlight docs site.
---

## TCA에서 Navigation을 구현하기 위한 2가지 방법
1. 트리 기반
2. 스택 기반

## 스택 기반
- TCA에서는 StackState라는 것을 사용해서 화면을 차곡차곡 쌓을 수 있습니다.
- StackState는 네비게이션 할 여러 화면의 State를 넣어두는 공간입니다
- 스택에 쌓을 수 있는 모든 화면의 상태를 enum으로 만들어서 넣습니다.
```swift
enum MyPagePathState: Equatable {
    case popList(PostListState) // 페이지(페이지 상태)
    case postDetail(PostDetailState)
}

struct State: Equatable {
    var path: StackState<MyPagePathState>() // 스택처럼 화면을 쌓는 공간 (MyPagePathState는 enum)
    // 나머지 상태
}
```

### 스택에 값을 넣고 빼는 방법
```swift
// 게시글 상세 화면으로 이동
state.path.append(.postDetail(PostDetailState(postID: 123)))

// 맨 위 화면 빼기
state.path.removeLast()

// 처음 화면만 남기기
state.path.removeAll()
```

### 스택 네비게이션을 View에 적용법
```swift
struct MyPageView: View {
    let store: StoreOf<MyPage>

    var body: some View {
        NavigationStackStore(store.scope(state: \.path, action: \.path)) {
            // 홈 화면
            HomeView()
        } destination: { state in
            // 스택에 쌓일 화면들
            switch state {
                case .detail(let detailScene):
                    DetailView(store: ...)
            }
        }
    }
}
```

### 스택 네비게이션 단점
- 스택 기반 Navigation과 NavigationStack은 drill-down(깊이 들어가는) 네비게이션에서만 적용되며 
sheet, popovers, alert 등과 같은 다른 형태의 네비게이션에는 대응하지 않습니다.(이럴때는 트리 기반으로 사용해야 합니다.)
- 완전히 비논리적인 네비게이션 경로를 표현할 수 있어서 자율도가 높지만 사이드 이팩트가 발생할 수 있습니다.
